{"version":3,"sources":["services/persons.js","components/Person.js","components/PersonList.js","components/DuplicateChecker.js","components/AddName.js","components/Filter.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","getAll","axios","get","create","newObject","post","update","id","put","then","response","data","deletePerson","delete","Person","person","handleDeletePerson","name","number","onClick","PersonList","personList","map","DuplicateChecker","persons","newName","newNumber","personService","setPersons","setPersonList","setErrorMessage","setNewName","setNewNumber","find","window","confirm","changedPerson","returnedPerson","p","setTimeout","catch","error","filter","AddName","handleNameChange","handleNumberChange","onSubmit","event","preventDefault","nameObject","length","concat","value","onChange","type","Filter","handleFilterChange","Notification","message","className","App","useState","setFilter","errorMessage","useEffect","target","filtered","toLowerCase","includes","console","log","filteredPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2ae3f423.chunk.js","sourcesContent":["import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  return axios.post(baseUrl, newObject);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst deletePerson = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default {\r\n  getAll,\r\n  create,\r\n  update,\r\n  deletePerson,\r\n};\r\n","import React from \"react\";\r\nconst Person = ({ person, handleDeletePerson }) => {\r\n  return (\r\n    <li>\r\n      {person.name + \" \" + person?.number}\r\n      <button onClick={() => handleDeletePerson(person.id)}>delete</button>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Person;\r\n","import React from \"react\";\r\nimport Person from \"./Person\";\r\n\r\nconst PersonList = ({ personList, handleDeletePerson }) => {\r\n  return (\r\n    <ul>\r\n      {personList.map((person) => (\r\n        <Person\r\n          key={person.id + 1}\r\n          person={person}\r\n          handleDeletePerson={handleDeletePerson}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default PersonList;\r\n","const DuplicateChecker = ({\r\n  persons,\r\n  newName,\r\n  newNumber,\r\n  personService,\r\n  setPersons,\r\n  setPersonList,\r\n  setErrorMessage,\r\n  setNewName,\r\n  setNewNumber,\r\n}) => {\r\n  const duplicateChecker = persons.find((person) => newName === person.name);\r\n  if (duplicateChecker) {\r\n    const confirmUpdate = window.confirm(\r\n      `${newName} is already added to phonebook. Replace the old number with a new one?`\r\n    );\r\n    if (confirmUpdate) {\r\n      const person = persons.find((person) => person.name === newName);\r\n      const { id } = person;\r\n      const changedPerson = { ...person, number: newNumber };\r\n\r\n      personService\r\n        .update(person.id, changedPerson)\r\n        .then((returnedPerson) => {\r\n          setPersons(persons.map((p) => (p.id !== id ? p : returnedPerson)));\r\n          setPersonList(persons.map((p) => (p.id !== id ? p : returnedPerson)));\r\n          setErrorMessage(`Updated number for ${person.name}`);\r\n          setTimeout(() => {\r\n            setErrorMessage(null);\r\n          }, 5000);\r\n        })\r\n        .catch((error) => {\r\n          setErrorMessage(\r\n            `Information for ${person.name} has already been removed from server`\r\n          );\r\n          setPersons(persons.filter((p) => p.id !== id));\r\n          setPersonList(persons.filter((p) => p.id !== id));\r\n\r\n          setTimeout(() => {\r\n            setErrorMessage(null);\r\n          }, 5000);\r\n        });\r\n    }\r\n    setNewName(\"\");\r\n    setNewNumber(\"\");\r\n\r\n    return;\r\n  }\r\n};\r\n\r\nexport default DuplicateChecker;\r\n","import React from \"react\";\r\nimport personService from \"./../services/persons\";\r\nimport DuplicateChecker from \"./DuplicateChecker\";\r\n\r\nconst AddName = ({\r\n  persons,\r\n  newName,\r\n  setNewName,\r\n  newNumber,\r\n  setNewNumber,\r\n  setPersonList,\r\n  setPersons,\r\n  handleNameChange,\r\n  handleNumberChange,\r\n  setErrorMessage,\r\n}) => {\r\n  const addName = (event) => {\r\n    event.preventDefault();\r\n\r\n    const nameObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n      id: persons.length + 1,\r\n    };\r\n\r\n    DuplicateChecker({\r\n      persons,\r\n      newName,\r\n      newNumber,\r\n      personService,\r\n      setPersons,\r\n      setPersonList,\r\n      setErrorMessage,\r\n      setNewName,\r\n      setNewNumber,\r\n    });\r\n\r\n    personService.create(nameObject).then((returnedPerson) => {\r\n      setPersons(persons.concat(returnedPerson.data));\r\n      setPersonList(persons.concat(returnedPerson.data));\r\n      setErrorMessage(`Added number for ${returnedPerson.data.name}`);\r\n      setTimeout(() => {\r\n        setErrorMessage(null);\r\n      }, 5000);\r\n      setNewName(\"\");\r\n      setNewNumber(\"\");\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={addName}>\r\n        <div>\r\n          name:{\" \"}\r\n          <input\r\n            value={newName}\r\n            onChange={handleNameChange}\r\n            persons={persons}\r\n          />\r\n        </div>\r\n        <div>\r\n          number: <input value={newNumber} onChange={handleNumberChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\nexport default AddName;\r\n","import React from \"react\";\r\n\r\nconst Filter = ({ filter, handleFilterChange }) => {\r\n  return (\r\n    <form>\r\n      <div>\r\n        filter shown with <input value={filter} onChange={handleFilterChange} />{\" \"}\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className=\"error\">{message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport personService from \"./services/persons\";\r\nimport PersonList from \"./components/PersonList\";\r\nimport AddName from \"./components/AddName\";\r\nimport Filter from \"./components/Filter\";\r\nimport Notification from \"./components/Notification\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [filter, setFilter] = useState(\"\");\r\n  const [personList, setPersonList] = useState([]);\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    personService.getAll().then((response) => {\r\n      setPersons(response.data);\r\n      setPersonList(response.data);\r\n    });\r\n  }, []);\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  const handleFilterChange = (event) => {\r\n    setFilter(event.target.value);\r\n\r\n    const filtered = persons.filter((person) =>\r\n      person.name.toLowerCase().includes(event.target.value.toLowerCase())\r\n    );\r\n    setPersonList(filtered);\r\n  };\r\n\r\n  const handleDeletePerson = (id) => {\r\n    console.log(id);\r\n    const person = persons.find((p) => p.id === id);\r\n    const confirmDelete = window.confirm(`Delete ${person.name} ?`);\r\n    if (confirmDelete) {\r\n      personService.deletePerson(id).then(() => {\r\n        const filteredPersons = persons.filter((person) => person.id !== id);\r\n        setPersons(filteredPersons);\r\n        setPersonList(filteredPersons);\r\n        setErrorMessage(`Deleted number for ${person.name}`);\r\n        setTimeout(() => {\r\n          setErrorMessage(null);\r\n        }, 5000);\r\n        setFilter(\"\");\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={errorMessage} />\r\n\r\n      <Filter\r\n        filter={filter}\r\n        setFilter={setFilter}\r\n        persons={persons}\r\n        setPersons={setPersons}\r\n        setPersonList={setPersonList}\r\n        handleFilterChange={handleFilterChange}\r\n      />\r\n      <h2>add a new</h2>\r\n\r\n      <AddName\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        persons={persons}\r\n        setPersons={setPersons}\r\n        handleNameChange={handleNameChange}\r\n        handleNumberChange={handleNumberChange}\r\n        setPersonList={setPersonList}\r\n        setNewName={setNewName}\r\n        setNewNumber={setNewNumber}\r\n        setErrorMessage={setErrorMessage}\r\n      />\r\n\r\n      <h2>Numbers</h2>\r\n      <PersonList\r\n        personList={personList}\r\n        handleDeletePerson={handleDeletePerson}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport \"./index.css\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}