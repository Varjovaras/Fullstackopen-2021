{"version":3,"sources":["services/persons.js","components/Person.js","components/PersonList.js","components/DuplicateChecker.js","components/AddName.js","components/Filter.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","getAll","axios","get","create","newObject","post","update","id","put","then","response","data","deletePerson","delete","Person","person","handleDeletePerson","name","number","onClick","PersonList","personList","map","DuplicateChecker","persons","newName","newNumber","personService","setPersons","setPersonList","setErrorMessage","setNewName","setNewNumber","find","window","confirm","changedPerson","returnedPerson","p","setTimeout","catch","error","filter","AddName","handleNameChange","handleNumberChange","onSubmit","event","preventDefault","nameObject","length","concat","value","onChange","type","Filter","handleFilterChange","Notification","message","className","App","useState","setFilter","errorMessage","useEffect","target","filtered","toLowerCase","includes","console","log","filteredPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.caafdf7d.chunk.js","sourcesContent":["import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n// const baseUrl = \"https://limitless-waters-75235.herokuapp.com/api/persons\";\n\nconst getAll = () => {\n  return axios.get(baseUrl);\n};\n\nconst create = (newObject) => {\n  return axios.post(baseUrl, newObject);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then((response) => response.data);\n};\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nexport default {\n  getAll,\n  create,\n  update,\n  deletePerson,\n};\n","import React from \"react\";\nconst Person = ({ person, handleDeletePerson }) => {\n  return (\n    <li>\n      {person.name + \" \" + person?.number}\n      <button onClick={() => handleDeletePerson(person.id)}>delete</button>\n    </li>\n  );\n};\n\nexport default Person;\n","import React from \"react\";\nimport Person from \"./Person\";\n\nconst PersonList = ({ personList, handleDeletePerson }) => {\n  return (\n    <ul>\n      {personList.map((person) => (\n        <Person\n          key={person.id + 1}\n          person={person}\n          handleDeletePerson={handleDeletePerson}\n        />\n      ))}\n    </ul>\n  );\n};\n\nexport default PersonList;\n","const DuplicateChecker = ({\n  persons,\n  newName,\n  newNumber,\n  personService,\n  setPersons,\n  setPersonList,\n  setErrorMessage,\n  setNewName,\n  setNewNumber,\n}) => {\n  const duplicateChecker = persons.find((person) => newName === person.name);\n  if (duplicateChecker) {\n    const confirmUpdate = window.confirm(\n      `${newName} is already added to phonebook. Replace the old number with a new one?`\n    );\n    if (confirmUpdate) {\n      const person = persons.find((person) => person.name === newName);\n      const { id } = person;\n      const changedPerson = { ...person, number: newNumber };\n\n      personService\n        .update(person.id, changedPerson)\n        .then((returnedPerson) => {\n          setPersons(persons.map((p) => (p.id !== id ? p : returnedPerson)));\n          setPersonList(persons.map((p) => (p.id !== id ? p : returnedPerson)));\n          setErrorMessage(`Updated number for ${person.name}`);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        })\n        .catch((error) => {\n          setErrorMessage(\n            `Information for ${person.name} has already been removed from server`\n          );\n          setPersons(persons.filter((p) => p.id !== id));\n          setPersonList(persons.filter((p) => p.id !== id));\n\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        });\n    }\n    setNewName(\"\");\n    setNewNumber(\"\");\n\n    return;\n  }\n};\n\nexport default DuplicateChecker;\n","import React from \"react\";\nimport personService from \"./../services/persons\";\nimport DuplicateChecker from \"./DuplicateChecker\";\n\nconst AddName = ({\n  persons,\n  newName,\n  setNewName,\n  newNumber,\n  setNewNumber,\n  setPersonList,\n  setPersons,\n  handleNameChange,\n  handleNumberChange,\n  setErrorMessage,\n}) => {\n  const addName = (event) => {\n    event.preventDefault();\n\n    const nameObject = {\n      name: newName,\n      number: newNumber,\n      id: persons.length + 1,\n    };\n\n    DuplicateChecker({\n      persons,\n      newName,\n      newNumber,\n      personService,\n      setPersons,\n      setPersonList,\n      setErrorMessage,\n      setNewName,\n      setNewNumber,\n    });\n\n    personService\n      .create(nameObject)\n      .then((returnedPerson) => {\n        setPersons(persons.concat(returnedPerson.data));\n        setPersonList(persons.concat(returnedPerson.data));\n        setErrorMessage(`Added number for ${returnedPerson.data.name}`);\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 5000);\n        setNewName(\"\");\n        setNewNumber(\"\");\n      })\n      .catch((error) => {\n        setErrorMessage(`${error.response.data.error}`);\n      });\n  };\n\n  return (\n    <div>\n      <form onSubmit={addName}>\n        <div>\n          name:{\" \"}\n          <input\n            value={newName}\n            onChange={handleNameChange}\n            persons={persons}\n          />\n        </div>\n        <div>\n          number: <input value={newNumber} onChange={handleNumberChange} />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </div>\n  );\n};\nexport default AddName;\n","import React from \"react\";\n\nconst Filter = ({ filter, handleFilterChange }) => {\n  return (\n    <form>\n      <div>\n        filter shown with <input value={filter} onChange={handleFilterChange} />{\" \"}\n      </div>\n    </form>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return <div className=\"error\">{message}</div>;\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from \"react\";\nimport personService from \"./services/persons\";\nimport PersonList from \"./components/PersonList\";\nimport AddName from \"./components/AddName\";\nimport Filter from \"./components/Filter\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [personList, setPersonList] = useState([]);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then((response) => {\n      setPersons(response.data);\n      setPersonList(response.data);\n    });\n  }, []);\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value);\n\n    const filtered = persons.filter((person) =>\n      person.name.toLowerCase().includes(event.target.value.toLowerCase())\n    );\n    setPersonList(filtered);\n  };\n\n  const handleDeletePerson = (id) => {\n    console.log(id);\n    const person = persons.find((p) => p.id === id);\n    const confirmDelete = window.confirm(`Delete ${person.name} ?`);\n    if (confirmDelete) {\n      personService.deletePerson(id).then(() => {\n        const filteredPersons = persons.filter((person) => person.id !== id);\n        setPersons(filteredPersons);\n        setPersonList(filteredPersons);\n        setErrorMessage(`Deleted number for ${person.name}`);\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 5000);\n        setFilter(\"\");\n      });\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} />\n\n      <Filter\n        filter={filter}\n        setFilter={setFilter}\n        persons={persons}\n        setPersons={setPersons}\n        setPersonList={setPersonList}\n        handleFilterChange={handleFilterChange}\n      />\n      <h2>add a new</h2>\n\n      <AddName\n        newName={newName}\n        newNumber={newNumber}\n        persons={persons}\n        setPersons={setPersons}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        setPersonList={setPersonList}\n        setNewName={setNewName}\n        setNewNumber={setNewNumber}\n        setErrorMessage={setErrorMessage}\n      />\n\n      <h2>Numbers</h2>\n      <PersonList\n        personList={personList}\n        handleDeletePerson={handleDeletePerson}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}